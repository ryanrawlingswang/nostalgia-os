<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryan Wang - Resume</title>
    <link rel="icon" type="image/x-icon" href="public/favicon.ico">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        
        #loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #333;
        }
        
        #mobile-version, #desktop-version {
            display: none;
        }
    </style>
</head>
<body>
    <div id="loading">Loading...</div>
    <div id="mobile-version"></div>
    <div id="desktop-version"></div>
    
    <script>
        // Function to detect if the user is on a mobile device
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                   window.innerWidth <= 768; // Also consider small screen sizes
        }
        
        // Function to load content
        function loadAppropriateVersion() {
            const loadingElement = document.getElementById('loading');
            const mobileElement = document.getElementById('mobile-version');
            const desktopElement = document.getElementById('desktop-version');
            
            // Hide loading indicator
            loadingElement.style.display = 'none';
            
            if (isMobileDevice()) {
                // Load mobile version
                fetch('mobile.html')
                    .then(response => response.text())
                    .then(html => {
                        mobileElement.innerHTML = html;
                        mobileElement.style.display = 'block';
                        
                        // Execute any scripts in the mobile version
                        const scripts = mobileElement.querySelectorAll('script');
                        scripts.forEach(script => {
                            const newScript = document.createElement('script');
                            if (script.src) {
                                newScript.src = script.src;
                            } else {
                                newScript.textContent = script.textContent;
                            }
                            script.parentNode.replaceChild(newScript, script);
                        });
                    })
                    .catch(error => {
                        console.error('Error loading mobile version:', error);
                        loadingElement.textContent = 'Error loading mobile version';
                        loadingElement.style.display = 'flex';
                    });
            } else {
                // Load desktop version
                fetch('desktop.html')
                    .then(response => response.text())
                    .then(html => {
                        desktopElement.innerHTML = html;
                        desktopElement.style.display = 'block';
                        
                        // Execute any scripts in the desktop version
                        const scripts = desktopElement.querySelectorAll('script');
                        scripts.forEach(script => {
                            const newScript = document.createElement('script');
                            if (script.src) {
                                newScript.src = script.src;
                            } else {
                                newScript.textContent = script.textContent;
                            }
                            script.parentNode.replaceChild(newScript, script);
                        });
                    })
                    .catch(error => {
                        console.error('Error loading desktop version:', error);
                        loadingElement.textContent = 'Error loading desktop version';
                        loadingElement.style.display = 'flex';
                    });
            }
        }
        
        // Load appropriate version when the page loads
        window.addEventListener('load', loadAppropriateVersion);
        
        // Also check on window resize (in case of device rotation)
        window.addEventListener('resize', function() {
            // Only recheck if we're currently showing one of the versions
            if (document.getElementById('mobile-version').style.display === 'block' || 
                document.getElementById('desktop-version').style.display === 'block') {
                // Simple approach: just reload the page to recheck
                window.location.reload();
            }
        });
    </script>
</body>
</html>